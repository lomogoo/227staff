# カレー損益分岐点計算 - アプリケーション仕様書

## 概要

本日のカレー店の損益分岐点を簡単に計算するWebアプリケーションです。従業員が勤務時間を入力すると、本日の営業に必要な売上高とカレーの販売杯数を自動計算します。

**アプリ名（日本語）:** カレー損益分岐点計算
**アプリ名（英語）:** Curry Sales Break-Even Point Calculator
**型式:** シングルページWebアプリケーション（HTML/CSS/JavaScript）
**対応環境:** モダンブラウザ（Chrome、Firefox、Safari等）

---

## 機能仕様

### 1. メイン機能：損益分岐点計算

#### 入力項目
- **勤務時間** （時間単位の数値入力）
  - ユーザーが本日の勤務時間を入力

#### 計算ロジック
```
損益分岐点杯数 = 勤務時間 × 時給 ÷ (カレー価格 - 原価)
損益分岐点売上 = 損益分岐点杯数 × カレー価格
```

#### 出力項目
- **損益分岐点杯数:** 本日の損益分岐点となるカレーの販売杯数
- **損益分岐点売上:** 必要な売上高（円）

### 2. 売上進捗管理

#### 機能
- **目標売上入力:** ユーザーが本日の売上目標を設定
- **実績売上入力:** リアルタイムで実際の売上を追跡
- **進捗表示:** ビジュアルプログレスバーで目標に対する進捗度を表示
- **残り売上計算:** 目標達成に必要な残り売上額を自動計算
- **残り杯数計算:** 残り売上に必要なカレー販売杯数を計算

### 3. 管理者設定機能

#### アクセス方法
- アプリのタイトルを5回クリックするとシークレット管理画面を表示

#### 設定項目
1. **カレー価格** （デフォルト値: ¥800）
   - 1杯あたりの販売価格

2. **原価** （デフォルト値: ¥250）
   - 1杯あたりの原価（仕入れ原価等）

3. **原価率** （デフォルト値: 31.25%）
   - 売上に占める原価の割合（自動計算可能）

4. **時給** （デフォルト値: ¥1500）
   - 従業員の時給額

#### 設定の保存
- Supabaseデータベースに自動保存
- Supabase接続に失敗時はブラウザのローカルストレージに保存

---

## データ仕様

### データベース（Supabase）

**サービスURL:** `hccairtzksnnqdujalgv.supabase.co`
**テーブル名:** `curry_settings`

**テーブルスキーマ:**
| カラム名 | データ型 | 説明 |
|---------|---------|------|
| id | UUID | プライマリキー |
| curry_price | DECIMAL | カレー価格（円） |
| cost | DECIMAL | 原価（円） |
| cost_rate | DECIMAL | 原価率（%） |
| hourly_wage | DECIMAL | 時給（円） |
| updated_at | TIMESTAMP | 更新日時 |

### ローカルストレージ

**フォールバック用:** ブラウザのローカルストレージに設定値を保存

---

## UI/UX仕様

### デザイン

- **配色:** ダークテーマ
  - 背景: 紫からピンク系のグラデーション（アニメーション付き）
  - メインカラー: 紫/ピンク系
  - テキスト: ホワイト

- **デザインパターン:** Glassmorphism（ガラスモーフィズム）
  - 透明背景にぼかし効果のカード

### レスポンシブ対応

- **モバイル:** 対応
- **タブレット:** 対応
- **デスクトップ:** 対応

全デバイスで最適な表示を実現

### アニメーション

- スムーズなページ遷移
- ホバーエフェクト
- 背景グラデーションのアニメーション
- プログレスバーのアニメーション

---

## 技術仕様

### 技術スタック

| 項目 | 内容 |
|------|------|
| HTML | HTML5 |
| CSS | Modern CSS3（カスタムプロパティ対応） |
| JavaScript | Vanilla JavaScript（フレームワーク不使用） |
| バックエンド | Supabase（PostgreSQL） |
| CDN | Supabase JavaScript SDK v2 |

### 外部依存関係

- **Supabase JS SDK:** CDNから読み込み（動的）

### ファイル構成

```
/home/user/227staff/
├── index.html          - メインアプリケーション（HTML+CSS+JS一体型）
├── SPECIFICATIONS.md   - 本仕様書
└── .git/              - Gitリポジトリメタデータ
```

---

## セキュリティ仕様

### 実装予定項目

- Supabase認証（現在: 認証なし）
- データ暗号化（現在: 未実装）
- HTTPS通信（本番環境）

### 現状

- 認証: なし（任意のユーザーが設定を変更可能）
- 設定はローカルストレージまたはSupabaseに保存

---

## ユーザーフロー

### 通常利用フロー

1. アプリを開く
2. 勤務時間を入力
3. 損益分岐点が自動表示される
4. 目標売上を入力（オプション）
5. 実績売上をリアルタイム追跡
6. 進捗状況を確認

### 管理者設定フロー

1. タイトルを5回クリック
2. 管理者設定画面が表示される
3. 各設定項目を変更
4. 変更が自動保存される
5. 管理画面を閉じるとメイン画面に戻る

---

## パフォーマンス仕様

- **ページロード時間:** < 2秒
- **計算応答時間:** リアルタイム（< 100ms）
- **ファイルサイズ:** ~24.4 KB（index.htmlのみ）

---

## ブラウザ互換性

- Chrome 最新版
- Firefox 最新版
- Safari 最新版
- Edge 最新版

---

## 今後の拡張予定（参考）

- [ ] ユーザー認証機能
- [ ] 複数店舗対応
- [ ] 日別/月別の売上統計
- [ ] レポート出力機能
- [ ] 多言語対応
- [ ] PWA化（オフライン対応）

---

**最終更新:** 2025-11-13
**バージョン:** 1.0
